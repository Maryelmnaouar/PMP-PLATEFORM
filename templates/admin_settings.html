<div class="container">

  <h2 class="section-title">
    <i class="fa-solid fa-gear"></i> Paramètres administrateur
  </h2>

  <!-- UTILISATEURS -->
  <div class="settings-card">
    <h3><i class="fa-solid fa-users"></i> Gestion des utilisateurs</h3>

    {% for u in users %}
      <div class="row-item">
        <strong>{{ u.username }}</strong> ({{ u.role }})

        <form method="post"
              action="{{ url_for('admin_delete_user', user_id=u.id) }}"
              onsubmit="return confirm('Supprimer cet utilisateur ?');">
          <button class="btn-danger">
            <i class="fa-solid fa-trash"></i>
          </button>
        </form>
      </div>
    {% endfor %}
  </div>

  <!-- TACHES -->
  <div class="settings-card">
    <h3><i class="fa-solid fa-list"></i> Suppression des tâches</h3>

    {% for t in tasks %}
      <div class="row-item">
        {{ t.line }} – {{ t.machine }} – {{ t.description }}

        <form method="post"
              action="{{ url_for('admin_delete_task', task_id=t.id) }}"
              onsubmit="return confirm('Supprimer cette tâche ?');">
          <button class="btn-danger">
            <i class="fa-solid fa-trash"></i>
          </button>
        </form>
      </div>
    {% endfor %}
  </div>

  <!-- KPI -->
  <div class="settings-card">
    <h3><i class="fa-solid fa-chart-line"></i> Ajustement KPI</h3>

    <form method="post" action="{{ url_for('admin_update_kpi_settings') }}">
      <label>Taux offset (%)</label>
      <input type="number" name="taux_offset" value="{{ kpi.taux_offset }}">

      <label>Score offset</label>
      <input type="number" name="score_offset" value="{{ kpi.score_offset }}">

      <button class="btn-warning">
        Appliquer les modifications
      </button>
    </form>
  </div>

</div>
